!function(a){var b={reCalcOnWindowResize:!0,throttleDuration:17},c=function(a){var b=a.find("img").attr("src");a.data("imageSrc",b),d(b,function(b,c){a.data({imageW:c.width,imageH:c.height}),g(a)})},d=function(b,c){a("<img />").one("load",function(){c(null,{width:this.width,height:this.height})}).attr("src",b)},e=function(a,b){var c=!1;return function(){var d=Array.prototype.slice.call(arguments,0);return!c&&(c=!0,void setTimeout(function(){c=!1,a.apply(null,d)},b))}},f=function(a,b,c,d,e){var f=Math.floor(b/2),g=(d+1)/2,h=Math.floor(c/a),i=Math.floor(g*h);e&&(i=h-i);var j=i-f,k=h-i,l=b-f;return k<l&&(j-=l-k),j<0&&(j=0),j*-100/b+"%"},g=function(a){var b=a.data("imageW"),d=a.data("imageH"),e=a.data("imageSrc");if(!b&&!d&&!e)return c(a);var g=a.width(),h=a.height(),i=parseFloat(a.data("focusX")),j=parseFloat(a.data("focusY")),k=a.find("img").first(),l=0,m=0;if(!(g>0&&h>0&&b>0&&d>0))return!1;var n=b/g,o=d/h;k.css({"max-width":"","max-height":""}),b>g&&d>h&&k.css(n>o?"max-height":"max-width","100%"),n>o?l=f(o,g,b,i):n<o&&(m=f(n,h,d,j,!0)),k.css({top:m,left:l})},h=a(window),i=function(a,b){var c=b.throttleDuration?e(function(){g(a)},b.throttleDuration):function(){g(a)},d=!1;return g(a),{adjustFocus:function(){return g(a)},windowOn:function(){if(!d)return h.on("resize",c),d=!0},windowOff:function(){if(d)return h.off("resize",c),d=!1,!0}}};a.fn.focusPoint=function(c){if("string"==typeof c)return this.each(function(){var b=a(this);b.data("focusPoint")[c]()});var d=a.extend({},b,c);return this.each(function(){var b=a(this),c=i(b,d);b.data("focusPoint")&&b.data("focusPoint").windowOff(),b.data("focusPoint",c),d.reCalcOnWindowResize&&c.windowOn()})},a.fn.adjustFocus=function(){return this.each(function(){g(a(this))})}}(jQuery);